---
#
# This playbook will make sure the packges provided through apt are up 
# to date (but will not reboot boxes; that is a different playbook)
#
- hosts: '{{ ansible_limit | default(omit) }}'
  vars:
    test-secrets: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          65613432353030633030653133303338616365616336343430306638613662653461316663366666
          6265383437333131326135613139653338383464356161370a623335316438346138626433353037
          66343230323364343432393266303032613266646535313964306130616336356538353164616538
          3236386631383338310a646235323930393866323362393533666564323235623537323130363533
          66653636316630653434663661616531636362323166393034336337363835306365
  gather_facts: false
  tasks: 
  - name: Decrypt secret
    set_fact:
      decrypted_secret: "{{ test-secrets }}"
  - name: Read the secret
    debug: msg="{{ decrypted_secret }}"